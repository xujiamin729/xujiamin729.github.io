<!-- 网页的布局配置 -->
<!-- hjy博客的布局头信息 -->
<!DOCTYPE>
<html lang="zh-CN"  >
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
    <meta name="viewport"  content="width=device-width,initial-scale=1">
    <meta name="author" content="David">

    <!-- 载入css文件 -->
    <link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/hjy-bootstrap.css">
    <link rel="stylesheet" href="/css/docs.min.css">

    <!--
    <link rel="stylesheet" href="/css/style.css">
    -->


    <!-- 设置不同页面的页面标题 -->
    
    <title>C语言编程之运算符 | 禹过留声</title>

    

</head>

<body>
    <!-- 针对屏幕阅读器，元素在有焦点时显示 -->
    <a class="sr-only sr-only-focusable" href="#content">
        <div class="container">
            <span class="skiplink-text">Skip to main content</span>
        </div>
    </a>
    <!-- 置顶导航栏 -->
    <header class="navbar navbar-fixed-top bs-docs-nav" id="topnav" role="banner">
        <div class="container">
            <div class="navbar-header">
                <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#navbar-content" aria-controls="bs-navbar" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a href="/" class="navbar-brand">
                    
                        C语言编程之运算符
                    
                </a>
            </div>
            <form class="navbar-form navbar-right hidden-print hidden-xs hidden-sm">
                <input type="text" class="form-control" id="local-search" name="search" placeholder="搜索……" autocomplete="off">
            </form>
            <nav class="navbar-collapse collapse" id="navbar-content" aria-expanded="true">
                <ul class="nav navbar-nav navbar-right">
                    
                    <li>
                        <a class="main-nav-link" href="/">首页</a>
                    </li>
                    
                    <li>
                        <a class="main-nav-link" href="/archives/">文章归档</a>
                    </li>
                    
                    <li>
                        <a class="main-nav-link" href="/skills/">技能图谱</a>
                    </li>
                    
                    <li>
                        <a class="main-nav-link" href="/reading/">读书</a>
                    </li>
                    
                    <li>
                        <a class="main-nav-link" href="/about/">关于我</a>
                    </li>
                    
                    <li>
                        <a class="main-nav-link" href="/links/">友情链接</a>
                    </li>
                    
                </ul>
            </nav>
        </div>
    </header>


    <div id="content" class="container">
        <div class="row">
            <!--左边导航栏-->
            <div class="col-md-3" role="complementary">
                <div class="hidden-print hidden-xs hidden-sm affix left-col" >
                <div class="introduce">
    <header id="header" class="inner">
        <!-- 头像 -->
        <a href="/" >
            <img src="/img/avatar.png" class="avatar">
        </a>
        <h2><a href="/">David</a></h2>

        
        <p class="header-subtitle">专注coding一百年</p>
        

        <ul class="nav nav-pills nav-justified">
            <li>
                <a href="">
                    <span class="item-state">64</span>
                    <span class="item-state">文章</span>
                </a>
            </li>
            <li>
                <a href="">
                    <span class="item-state">3</span>
                    <span class="item-state">标签</span>
                </a>
            </li>
            <li>
                <a href="">
                    <span class="item-state">18</span>
                    <span class="item-state">读书</span>
                </a>
            </li>
        </ul>

        <!-- 社交图标 -->
        <ul class="list-inline">
            
            <li>
                <a href="mailto:haojunyu2012@gmail.com" title="envelope" target="_blank">
                    <span class="fa-stack fa-lg">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-envelope fa-stack-1x fa-inverse" aria-hidden="true"></i>
                </a>
            
            <li>
                <a href="/sina weibo" title="Weibo" target="_blank">
                    <span class="fa-stack fa-lg">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-Weibo fa-stack-1x fa-inverse" aria-hidden="true"></i>
                </a>
            
            <li>
                <a href="https://github.com/haojunyu" title="GitHub" target="_blank">
                    <span class="fa-stack fa-lg">
                        <i class="fa fa-circle fa-stack-2x"></i>
                        <i class="fa fa-GitHub fa-stack-1x fa-inverse" aria-hidden="true"></i>
                </a>
            
        </ul>

        <hr>
        <!-- 研究涉及领域 -->
        
            显示目录
        

    </header>
</div>

            </div>
            </div>
            <!--主要内容显示-->
            <div class="col-md-9" role="main">
            
            <div class="body-wrap"><head>
    <title>C语言编程之运算符</title>
</head>
<body>
C语言编程之运算符
<hr>
<p>在C语言中有很多运算符，像求字节数运算符[sizeof]，赋值运算符,算术运算符,关系运算符,逻辑运算符，条件运算符，位运算符，指针运算符等。这些运算符在运算时是有优先级的，会最终影响结果。所以了解其优先级以及运算方法是挺重要的（虽然本人觉得这些都可以通过加括号来解决，但是还是要了解一下，以便更快读懂他人程序）。<br><a id="more"></a></p>
<h2 id="类型转换"><a href="#类型转换" class="headerlink" title="类型转换"></a>类型转换</h2><p>在C语言中，有很多双目运算符（一个运算符有两个操作数），一般情况下两个操作数的数据类型要是一样的，不过当两边类型不一致时就要进行==类型转换==。而类型转换的最基本的原则是==往最高级转换==。其转换的关系如下图：<br><img src="!--￼3--&gt;/assets/images/convert_type.png" alt="convert_type"><br>图中纵向代表转换的顺序，int-&gt;unsigned-&gt;long-&gt;double;而两个横向的转换是当表达式中出现了float会当作double来处理，出现了short，char类型都会当作int来处理，也就是说这步是必须的，必须执行的转换。所以我们得到以下的结论：</p>
<ol>
<li>表达式的结果类型只有int/unsigned/long/double四种类型。</li>
<li>表达式的结果类型只要看表达式中数据类型最高的那个。</li>
</ol>
<h2 id="自增-自减"><a href="#自增-自减" class="headerlink" title="自增/自减"></a>自增/自减</h2><p>自增和自减概念类似，这里以自增为例。自增包括前自增和后自增。前自增（++i）是指变量先自增，然后将自增后的结果当作表达式的值;而后自增（i++）是指变量先将值当作表达式的值，然后再自增1。这个在大学学C语言就知道了，这里在提及是为了下面关于自增/自减的两种使用情况。</p>
<ol>
<li><p>自增/自减操作符只能用于变量，不能用于表达式</p>
 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i=<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"i = %d\n"</span>,i);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"i++ = %d\n"</span>,i++);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"i = %d\n"</span>,i);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"++i = %d\n"</span>,++i);</span><br><span class="line">    rintf(<span class="string">"i = %d\n"</span>,i);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// error: lvalue required as increment operand</span></span><br><span class="line">    <span class="comment">//printf("(-i)++ = %d\n",(-i)++);</span></span><br><span class="line">    <span class="comment">//printf("++i++ = %d\n",++i++);</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> 由注释的三行可知：当给表达式进行自增操作的时候，回报左值需要增量操作数。</p>
</li>
<li><p>在输出中，计算顺序是从右往左</p>
 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> i=<span class="number">1</span>;</span><br><span class="line">    <span class="comment">// 输出多个自增</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"i = %d\n"</span>,i);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"i = %d, i++ =%d\n"</span>,i,i++);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"i = %d\n"</span>,i);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"i++ = %d, ++i =%d\n"</span>,i,++i);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"i = %d\n"</span>,i);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> 根据下图输出的截图，我们发现运算的顺序是从右往左的。代码见<a href="!--￼4--&gt;/assets/attachs/selfinc.c.txt">附件</a>。</p>
<p> <img src="!--￼5--&gt;/assets/images/increasment.png" alt="increasment">  </p>
</li>
</ol>
<h2 id="混合运算"><a href="#混合运算" class="headerlink" title="混合运算"></a>混合运算</h2><p>虽然本人觉得这部分绝对是装x的作死的，因为多用（）就能解决表达式的可读性，但为了读懂某些装x作死的coder写的code，还是稍微了解一下。</p>
<ul>
<li><p>操作符的优先级</p>
<ol>
<li>括号级别<br>这是C语言中运算级别最高的操作符了。<br><img src="!--￼6--&gt;/assets/images/operator1.png" alt="operator1"></li>
<li>单目运算符<br>第二级别的运算符有两个共同的特征:<ul>
<li>它们都是单目运算符（强制类型转换和长度运算符sizeof个人也觉得算单目）</li>
<li>它们都是从右往左运算的（右撇子三剑客之一）。<br><img src="!--￼7--&gt;/assets/images/operator2.png" alt="operator2"></li>
</ul>
</li>
<li><p>双目运算符<br>第三级别里面的操作符就“群魔乱舞”了。  </p>
<ol>
<li>算术运算符<br>对于算术运算符，可能都知道乘除高于加减，但是还得记得取模%和乘除是同级的。<br><img src="!--￼8--&gt;/assets/images/operator34.png" alt="operator34">  </li>
<li>移位运算符<br>有点疑问，见问题&amp;回答1。<br><img src="!--￼9--&gt;/assets/images/operator5.png" alt="operator5">  </li>
<li>关系运算符<br>记住一点，大于小于高于等于。<br><img src="!--￼10--&gt;/assets/images/operator67.png" alt="operator67">  </li>
<li><p>位操作符和逻辑操作符<br>位操作符和逻辑操作符算是双目运算符中比较特殊的两个操作符，其特殊之处如下：  </p>
<ul>
<li>按位取反操作符和逻辑非操作符是单目运算符，跻身第二级别</li>
<li>按位操作符优先级高于逻辑操作符</li>
<li>按位与&amp; &gt; 按位异或^ &gt; 按位或|; 逻辑与&amp;&amp; &gt; 逻辑或||</li>
</ul>
<p><img src="!--￼11--&gt;/assets/images/operator8-12.png" alt="operator8-12">  </p>
</li>
</ol>
</li>
<li>三目运算符<br>这也是从右往左运算的操作符（右撇子三剑客之一）<br><img src="!--￼12--&gt;/assets/images/operator13.png" alt="operator13"></li>
<li>赋值家族运算符<br>这是除了不常用的逗号运算符以外优先基本最低的运算符了，而且也是最后一个从右往左运算的操作（右撇子三剑客之一）。<br><img src="!--￼13--&gt;/assets/images/operator14.png" alt="operator14"></li>
<li>逗号运算符<br>这是优先级别最低的运算符，也是最不常用的运算符。<br><img src="!--￼14--&gt;/assets/images/operator15.png" alt="operator15"></li>
</ol>
</li>
<li>记忆要诀<br>上面的优先级还是比较繁琐的，还是下面的基础要诀比较重要：  <ul>
<li>括号最重要，操作数越多优先级越低（单目&gt;双目&gt;三目）  </li>
<li>双目中，算术运算符 &gt; 移位运算符 &gt; 关系运算符 &gt; 位操作符 &gt; 逻辑操作符  </li>
<li>三目运算符（条件运算符） &gt; 赋值家族运算符 &gt; 逗号运算符  </li>
<li>相同优先级中，按结合顺序计算。只有三种运算符是从右往左的，分别是单目运算符，条件运算符和赋值运算符。  </li>
</ul>
</li>
<li><p>剪刀法切割表达式  </p>
  <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">short</span> s;</span><br><span class="line"><span class="keyword">int</span> i;</span><br><span class="line"><span class="keyword">float</span> f;</span><br><span class="line"><span class="keyword">double</span> d;</span><br><span class="line"><span class="keyword">unsigned</span> u;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">"%d\n"</span>,<span class="number">123</span>%s+(i+<span class="string">'@'</span>)+i*u-f/d);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>剪刀法是将表达式中的符号按照优先级由低到高的顺序依次减开，而且除了右撇子三剑客之外都要从右往左开始剪。比如上式表达式中按下面的顺序剪开：</p>
<pre><code>1. u-f
2. ）+i
3. s+(  
</code></pre><p>此时表达式将变成四个部分，分别是123%s[int]，(i+’@’)[int],i*u[unsigned],f/d[double]。最终的结果也是double类型的。</p>
<h2 id="问题-amp-回答"><a href="#问题-amp-回答" class="headerlink" title="问题&amp;回答"></a>问题&amp;回答</h2><ol>
<li>Q：在移位运算符中，我们发现其用法是变量&gt;&gt;表达式，按理说这样的用法4&gt;&gt;1应该会报错的（和自增/自减类似），但是执行代码<code>printf(&quot;%d\n&quot;,4&gt;&gt;1);</code>会获得结果2。<br>A: 尚且无解</li>
</ol>
<h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><ol>
<li><a href="https://www.coursera.org/learn/jisuanji-biancheng/home/week/8" target="_blank" rel="external">计算机导论与C语言基础</a></li>
<li><a href="http://www.jb51.net/article/37282.htm" target="_blank" rel="external">C语言运算符优先级列表</a></li>
<li><a href="https://www.baidu.com/link?url=Dxl9sKUNMilpQ6j0ntrsvTU9x_XC4SO_oLhDdDGf0eH5j66dL9L4Am84PcUWKIt9qIhzz8ymJ358i_1jtuzcfq&amp;wd=&amp;eqid=d2c31b200000d9dd000000045625cbc3" target="_blank" rel="external">运算符优先级</a></li>
</ol>

</body>
</div>
            <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <i class="fa fa-copyright"></i>
            2013-2016 David | Powered by
                <a href="http://hexo.io/" target="_blank">Hexo</a>,
                <a href="https://pages.github.com/" target="_blank">Github Pages</a>,
                <a href="http://wiki.jikexueyuan.com/project/react/getting-started.html" target="_blank">React</a> and
                <a href="http://haojunyu.duoshuo.com/admin/" target="_blank">多说</a>.
        </div>
    </div>
</footer>

            </div>
        </div>
        <!-- 载入JavaScript文件 -->
<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    </div>
</body>
</html>
