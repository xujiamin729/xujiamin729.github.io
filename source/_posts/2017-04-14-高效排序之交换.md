---
layout: post
title: 高效排序之交换
categories:
  - TECHNOLOGY
tags:
  - Algorithm
  - Research
comments: true
date: 2017-04-14 10:29:51
permalink: Research-swap
---

在很多排序算法中都会使用到交换函数`Swap`，而且还是使用频率最高的函数，该函数的时间和空间复杂度完全可以决定整个排序算法的时间和空间复杂度，所以对于交换函数效率的研究还是非常重要的。而本文主要是根据贝尔实验室的JON L.BENTLEY和M.DOUGLAS McILROY发表的论文《[Engineering a Sort Function][EngiSortFunc]》。
<!-- more -->

## 理论准备
### 字节序
* 标题`title`


## 程序实践
### 计时函数选择
要研究交换函数的效率，首先要有衡量效率的尺。这里就直接用函数运行的时间来比较实现相同功能的函数间的效率。而对于计时函数的选择我们分别对`time()`，`clock()`，`clock_gettime()`进行了试验，最终选择`clock()`函数作为计时函数。
#### 函数`time`
1. 定义
```c
#include<stdio.h>
time_t time(time_t *arg);
```
2. 功能
获取当前日历时间（距离1970年1月1号00:00:00所经过的秒数），并返回到time_t对象中，如果arg是非空指针，则当前时间也会存储到*arg对象中。单位为秒。
3. 注意点
	* time_t类型被宏定义为long int
> **Tips:**
> `time()`函数在[glibc-2.22源码][glibc-2.22]中实现的方式（sysdeps/unix/sysv/linux/time.c）是调用内核函数`INTERNAL_SYSCALL(time, err, 1, NULL)`实现的。

#### 函数`clock`
1. 定义
```c 
#include<time.h>
clock_t clock(void);
```
2.功能
获取该程序从启动到本函数被调用所占用的额CPU时间，该时间是用户CPU时间和系统CPU时间之和。单位为微秒
3. 注意点
	* clock_t类型被宏定义为long int
	* 在单核处理器上，实际时间大于CPU时间
	* 一般CLOCKS_PER_SEC=1000000，所以时间单位为微秒

#### 函数`clock_gettime`
1. 定义
```c 
#include<time.h>
int clock_gettime(clockid_t clk_id, struct timespec *tp);
// timespec定义
struct timespec{
	time_t tv_sec;     //秒
	long int tv_nsec;  //纳秒
}
```
2.功能
通过clk_id来决定获取CPU时间[CLOCK_PROCESS_CPUTIME_ID]，实际运行时间[CLOCK_MONOTOTIC]等时间，单位为纳秒
3. 注意点
	* clockid_t类型被宏定义为int
	* 虽然tv_nsec的单位是纳秒，但是基本后三位为0，所以精度还是微秒

### 操作的耗时




## 参考文献
1. [Engineering a Sort Function][EngiSortFunc]
1. [字节序][endianness]
2. [字节序的类别][Types of endianness]
2. [glibc-2.22源码][glibc-2.22]

[EngiSortFunc]: http://cs.fit.edu/~pkc/classes/writing/samples/bentley93engineering.pdf
[endianness]: https://zh.wikipedia.org/wiki/%E5%AD%97%E8%8A%82%E5%BA%8F
[Types of endianness]: http://stackoverflow.com/questions/21449/types-of-endianness
[glibc-2.22]: http://ftp.gnu.org/gnu/libc/glibc-2.22.tar.xz

