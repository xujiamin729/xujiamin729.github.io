---
layout:	post
title:	shell编程之文本处理工具sed
categories:
- TECHNOLOGY
tags:
- Shell
permalink:  Explore-sed-Shell
comments:	true
---
SED命令的功能同awk类似，差别在于，sed简单，对列处理的功能要差一些，awk的功能复杂，对列处理的功能比较强大，sed全称是：Stream EDitor.它主要是**以行为单位**进行处理，可以将数据行进行*替换*、*删除*、*新增*、*选取*等特定工作.特别强调一点,==sed的操作对源文件不作修改==.



## 使用方法
* 基本用法

	```bash
	sed [-nei] 'command' filename
	```
* 参数说明
	* `-n`	使用安静模式.只有经过处理的那一行才会被列出来.[一般情况,所有内容都会被列到屏幕上]
	* `-e`	直接在指令列模式上进行sed的动作编辑
	* `-i`	直接修改读取的档案内容,而不是有屏幕输出
* 核心命令
	* `a`	**新增**,a后面可以接字符串,而这些字符串会在新的一行出现(目前的下一行)
	* `c`	**取代**,c后面可以接字符串,这些字符串可以取代n1,n2之间的行
	* `d`	**删除**,d后面不接任何字符串.
	* `i`	**插入**,i后面可以接字符串,而这些字符串会在新的一行出现(目前的上一行)
	* `p`	**打印**,通常会和sed -n 一起使用
	* `s`	**取代**,通常这个s动作可以搭配正则表达式一起使用.
	* `n`	读取下一行
	* `y`	指定**替换**[sed 'y/abc/ABC' file -- a换成A,b换成B,c换成C]
	* `q`	**退出**

## 样例演示
* 显示第40行到最后一行

	```bash
	sed -n '40,$p' /etc/passwd
	```
![sed-n]({{ site.baseurl }}/assets/images/sed-n.png)
* 在第40行到最后一行后面添加字符串"\=\=\=I am here\=\=\="

	```bash
	sed '40,$a ===I am here===' /etc/passwd
	```
![sed-a]({{ site.baseurl }}/assets/images/sed-a.png)
* 使用模式进行查询sys字符

	```bash
	sed -n '/sys/p' /etc/passwd
	```
![sed-ns]({{ site.baseurl }}/assets/images/sed-ns.png)
* 替换一行中的某部分

	```bash
	sed -n 's/sys/replace/p' /etc/passwd
	```
![sed-rep]({{ site.baseurl }}/assets/images/sed-rep.png)
