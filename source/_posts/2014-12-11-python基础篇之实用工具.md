---
layout:	post
title:	python基础篇之实用工具
categories:
- TECHNOLOGY
tags:
- Python
- Google
permalink:  Study-tool-Python
comments:	true
---
个人觉得python越来越实用离不开其强大的模块,框架的支持,像文件模块,命令行模块,django框架,sk-learning工具箱等等.这些都让python能够非常方便的处理不同领域的问题.
<!-- more -->


## 文件模块
* 模块支持

	```python
	import os
	import shutil
	```
* 常用函数

	```python
	# 获取文件列表
	filenames = os.listdir(dir)

	# 拼接文件路径
	os.path.join(dir,filename)

	# 获取绝对路径
	os.path.abspath(path)

	# 从完整路径中获取目录和文件名
	os.path.dirname(path)
	os.path.basename(path)

	# 判断完整路径是否存在
	os.path.exists(path)

	# 创建目录
	os.mkdir(dir_path)
	# 创建路径上的所有文件夹
	os.makedirs(dir_path)   

	# 拷贝文件
	shutil.copy(src,dest)
	```
## 命令行模块
* 模块支持

	```python
	import commands
	```
* 常用函数

	```python
	# 运行命令，等待结束。返回状态（正常返回是0）和结果。
	(status, output) = commands.getstatusoutput(cmd)

	# 不返回状态的执行命令
	output = commands.getoutput(cmd)

	# 不关心结果，只要执行即可
	os.system(cmd)
	```
* 样例代码

	```python
	# 给定一个dir路径，运行 'ls -l'
	def listdir(dir):
		cmd = 'ls -l ' + dir
		print "Command to run:", cmd   ## 易于调试
		(status, output) = commands.getstatusoutput(cmd)
		if status:    ## 错误情况，打印错误信息并退出
			sys.stderr.write(output)
			sys.exit(1)
		print output  ## 否则显示输出结果
	```

## 异常处理
* 样例代码

	```python
	try:
	    # 打开文件或读取文件出现问题将抛出 IOError 异常.
	    f = open(filename, 'rU')
		text = f.read()
		f.close()
	except IOError:
		# 处理 IOError 异常.
		sys.stderr.write('problem reading:' + filename)
	# try/except后面的代码将继续执行
	```

## 网络模块
* 模块支持

	```python
	import urllib
	```
* 常用函数

	```python
	# 返回一个文件
	ufile = urllib.urlopen(url)

	# 读取文件信息
	text = ufile.read()

	# 获取网络文件meta/type 信息
	info = ufile.info()
	type = info.gettype()

	# 获取最初始的url（针对重定向）
	baseurl = ufile.geturl()

	# 下载url数据到指定的文件
	urllib.urlretrieve(url,filename)

	# 获取完整url
	urlparse.urljoin(baseurl,url)
	```
* 样例代码

	```python
	## 用try/except处理网络异常
	def wget(url):
		try:
			ufile = urllib.urlopen(url)
			if ufile.info().gettype() == 'text/html':
				print ufile.read()
		except IOError:
			print 'problem reading url:', url

	wget('http://www.baidu.com')  # 一定要加http://
	```

## 课后练习
* 练习题1: [copyspecial.py]({{ site.baseurl }}/assets/attachs/copyspecial.py.txt)
* 练习题2: [logpuzzle.py]({{ site.baseurl }}/assets/attachs/logpuzzle.py.txt)
